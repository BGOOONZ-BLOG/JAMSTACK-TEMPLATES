<div class="code-box" id="demo-filelist">
  <div class="code-box-demo">
    <div id="components-upload-demo-filelist"></div>
    <script>(function(){'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var Upload = antd.Upload;
var fileList = [{
  uid: -1,
  name: 'xxx.png',
  status: 'done',
  url: 'http://www.baidu.com/xxx.png'
}];

var MyUpload = React.createClass({
  displayName: 'MyUpload',

  getInitialState: function getInitialState() {
    return {
      fileList: fileList
    };
  },
  handleChange: function handleChange(info) {
    var fileList = info.fileList;

    // 1. 上传列表数量的限制
    //    只显示最近上传的一个，旧的会被新的顶掉
    fileList = fileList.slice(-2);

    // 2. 读取远程路径并显示链接
    fileList = fileList.map(function (file) {
      if (file.response) {
        // 组件会将 file.url 作为链接进行展示
        file.url = JSON.parse(file.response).url;
      }
      return file;
    });

    // 3. 按照服务器返回信息筛选成功上传的文件
    fileList = fileList.filter(function (file) {
      if (file.response) {
        return JSON.parse(file.response).status === 'success';
      }
      return true;
    });

    this.setState({
      fileList: fileList
    });
  },
  render: function render() {
    var props = {
      action: '/upload.do',
      onChange: this.handleChange,
      multiple: true
    };
    return React.createElement(
      Upload,
      _extends({}, props, { fileList: this.state.fileList }),
      React.createElement(
        'button',
        { type: 'button', className: 'ant-btn ant-btn-ghost' },
        React.createElement('i', { className: 'anticon anticon-upload' }),
        ' 点击上传'
      )
    );
  }
});

React.render(React.createElement(MyUpload, null), document.getElementById('components-upload-demo-filelist'));})()</script><div class="highlight"><pre><code class="javascript"><span class="keyword">var</span> Upload = antd.Upload;
<span class="keyword">var</span> fileList = [{
  uid: -<span class="number">1</span>,
  name: <span class="string">'xxx.png'</span>,
  status: <span class="string">'done'</span>,
  url: <span class="string">'http://www.baidu.com/xxx.png'</span>
}];

<span class="keyword">var</span> MyUpload = React.createClass({
  getInitialState() {
    <span class="keyword">return</span> {
      fileList: fileList
    };
  },
  handleChange(info) {
    <span class="keyword">let</span> fileList = info.fileList;

    <span class="comment">// 1. 上传列表数量的限制</span>
    <span class="comment">//    只显示最近上传的一个，旧的会被新的顶掉</span>
    fileList = fileList.slice(-<span class="number">2</span>);

    <span class="comment">// 2. 读取远程路径并显示链接</span>
    fileList = fileList.map(<span class="function"><span class="keyword">function</span><span class="params">(file)</span> {</span>
      <span class="keyword">if</span> (file.response) {
        <span class="comment">// 组件会将 file.url 作为链接进行展示</span>
        file.url = JSON.parse(file.response).url;
      }
      <span class="keyword">return</span> file;
    });

    <span class="comment">// 3. 按照服务器返回信息筛选成功上传的文件</span>
    fileList = fileList.filter(<span class="function"><span class="keyword">function</span><span class="params">(file)</span> {</span>
      <span class="keyword">if</span> (file.response) {
        <span class="keyword">return</span> JSON.parse(file.response).status === <span class="string">'success'</span>;
      }
      <span class="keyword">return</span> <span class="literal">true</span>;
    });

    <span class="keyword">this</span>.setState({
      fileList: fileList
    });
  },
  render() {
    <span class="keyword">var</span> props = {
      action: <span class="string">'/upload.do'</span>,
      onChange: <span class="keyword">this</span>.handleChange,
      multiple: <span class="literal">true</span>
    };
    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="title">Upload</span> {<span class="attribute">...props</span>} <span class="attribute">fileList</span>=<span class="value">{this.state.fileList}</span>&gt;</span>
      <span class="tag">&lt;<span class="title">button</span> <span class="attribute">type</span>=<span class="value">"button"</span> <span class="attribute">className</span>=<span class="value">"ant-btn ant-btn-ghost"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">i</span> <span class="attribute">className</span>=<span class="value">"anticon anticon-upload"</span>&gt;</span><span class="tag">&lt;/<span class="title">i</span>&gt;</span> 点击上传
      <span class="tag">&lt;/<span class="title">button</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">Upload</span>&gt;</span>;</span>
  }
});

React.render(<span class="xml"><span class="tag">&lt;<span class="title">MyUpload</span> /&gt;</span>, document.getElementById('components-upload-demo-filelist'));</span></code></pre></div>
  </div>
  <div class="code-box-meta markdown">
    <div class="code-box-title">
      <a href="#demo-filelist">完全控制的上传列表</a>
    </div>
    <p>使用 <code>fileList</code> 对列表进行完全控制，可以实现各种自定义功能，以下演示三种情况：</p>
<p>1) 上传列表数量的限制。</p>
<p>2) 读取远程路径并显示链接。</p>
<p>3) 按照服务器返回信息筛选成功上传的文件。</p>
    <span class="collapse anticon anticon-circle-o-right" unselectable="none" style="-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"></span>
  </div>
</div>