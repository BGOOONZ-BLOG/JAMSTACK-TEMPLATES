# Settings in the [build] context are global and are applied to all contexts
# unless otherwise overridden by more specific contexts.
[build]
  # Directory to change to before starting a build.
  # This is where we will look for package.json/.nvmrc/etc.
  base = ""

  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "website/build/testing-library-docs"

  # Default build command.
  command = "cd website; npm install; npm run build"

# React root to React landing page
[[redirects]]
  from = "https://react-testing-library.com/"
  to = "https://testing-library.com/react/"
  status = 301
  force = true

# React to main domain
[[redirects]]
  from = "https://react-testing-library.com/*"
  to = "https://testing-library.com/:splat"
  status = 301
  force = true

# Netlify subdomain to main domain
[[redirects]]
  from = "https://testing-library.netlify.com/*"
  to = "https://testing-library.com/:splat"
  status = 301
  force = true

# Redirects due to reorganization
[[redirects]]
  from = "/docs/*"
  to = "/docs/dom-testing-library/:splat"
  status = 301
  force = false # do not redirect if route is not 404

# React landing page to home page
[[redirects]]
  from = "https://testing-library.com/react/"
  to = "https://testing-library.com/docs/react-testing-library/intro"
  status = 301
  force = true

# Cypress landing page to home page
[[redirects]]
  from = "https://testing-library.com/cypress/"
  to = "https://testing-library.com/docs/cypress-testing-library/intro"
  status = 301
  force = true

# Vue landing page to home page
[[redirects]]
  from = "https://testing-library.com/vue/"
  to = "https://testing-library.com/docs/vue-testing-library/intro"
  status = 301
  force = true

# Angular landing page to home page
[[redirects]]
  from = "https://testing-library.com/angular/"
  to = "https://testing-library.com/docs/angular-testing-library/intro"
  status = 301
  force = true

# Puppeteer landing page to home page
[[redirects]]
  from = "https://testing-library.com/pptr/"
  to = "https://testing-library.com/docs/pptr-testing-library/intro"
  status = 301
  force = true
